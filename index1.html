<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ganesh Chaturthi Donations (Instamojo)</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
  />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    .hidden {
      display: none;
    }
    nav a {
      margin-right: 10px;
      text-decoration: none;
      padding: 6px 12px;
      background: #eee;
      border-radius: 4px;
      color: #333;
      cursor: pointer;
    }
    nav a.active-tab {
      background: #d97706;
      color: white;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      margin-bottom: 6px;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      box-sizing: border-box;
      font-size: 1em;
    }
    button {
      cursor: pointer;
      background-color: #d97706;
      border: none;
      color: white;
      border-radius: 4px;
    }
    button:hover {
      background-color: #b45f05;
    }
    .pooja-item {
      padding: 4px 0;
      border-bottom: 1px solid #ddd;
    }
    .gallery-img {
      display: inline-block;
      margin: 6px;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      width: 150px;
      height: 100px;
      position: relative;
      cursor: pointer;
    }
    .gallery-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      vertical-align: middle;
    }
    .gallery-img div {
      position: absolute;
      bottom: 0;
      background: rgba(0,0,0,0.6);
      color: white;
      width: 100%;
      font-size: 0.8em;
      padding: 4px 6px;
      text-align: center;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .gallery-img:hover div {
      opacity: 1;
    }
    #image-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.85);
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    #image-modal img {
      max-width: 90vw;
      max-height: 80vh;
      border-radius: 6px;
      box-shadow: 0 0 15px rgba(255,255,255,0.7);
      margin-bottom: 10px;
    }
    #image-modal p {
      color: white;
      margin: 0;
      max-width: 90vw;
      text-align: center;
    }
    #image-modal .close {
      position: absolute;
      right: 24px;
      top: 20px;
      font-size: 2em;
      color: white;
      cursor: pointer;
      font-weight: 700;
      user-select: none;
    }
    #donate-now-btn, #login-btn, #logout-btn, #pooja-save-btn,
    #pooja-cancel-btn, #admin-pooja-save-btn, #admin-donation-add-btn,
    #admin-expense-add-btn {
      width: auto;
      padding: 8px 16px;
      margin-top: 0;
    }
    #floating-donate-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #d97706;
      color: white;
      border-radius: 50%;
      width: 55px;
      height: 55px;
      border: none;
      font-size: 1.6em;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <nav>
    <a href="#" class="nav-link active-tab" data-tab="home">Home</a>
    <a href="#" class="nav-link" data-tab="schedule">Schedule</a>
    <a href="#" class="nav-link" data-tab="donation">Donate</a>
    <a href="#" class="nav-link" data-tab="gallery">Gallery</a>
    <a href="#" class="nav-link" data-tab="admin">Admin</a>
  </nav>

  <!-- Home -->
  <section id="home-tab" class="content-tab">
    <h2>Welcome to Ganesh Chaturthi</h2>
    <div>
      <h3>Pooja Schedule</h3>
      <div id="home-pooja-list"></div>
    </div>
    <div>
      <h3>Countdown to Ganesh Chaturthi (Aug 27, 2025)</h3>
      <div>
        <span id="countdown-days">00</span> Days
        <span id="countdown-hours">00</span> Hours
        <span id="countdown-minutes">00</span> Minutes
        <span id="countdown-seconds">00</span> Seconds
      </div>
    </div>
  </section>

  <!-- Schedule -->
  <section id="schedule-tab" class="content-tab hidden">
    <h2>Pooja Schedule</h2>
    <ul id="pooja-schedule-list"></ul>
    <button id="pooja-edit-btn" class="hidden" type="button">Edit Schedule (Admin Only)</button>
    <div id="pooja-edit-section" class="hidden">
      <textarea id="pooja-schedule-textarea" rows="6"></textarea>
      <div>
        <button id="pooja-save-btn" type="button">Save</button>
        <button id="pooja-cancel-btn" type="button">Cancel</button>
      </div>
    </div>
  </section>

  <!-- Donation -->
  <section id="donation-tab" class="content-tab hidden">
    <h2>Donate</h2>
    <input type="number" id="donate-amount" placeholder="Amount (INR)" />
    <input type="text" id="donate-name" placeholder="Your Name" />
    <input type="email" id="donate-email" placeholder="Your Email" />
    <button id="donate-now-btn" type="button">Donate Now (Instamojo)</button>
    <div id="instamojo-status" style="margin-bottom: 16px; color: #b45309;"></div>
    <div>
      <h3>Total Donations:</h3> <span id="donation-total">â‚¹0</span>
      <h3>Total Expenses:</h3> <span id="expense-total">â‚¹0</span>
      <h3>Net Balance:</h3> <span id="net-balance">â‚¹0</span>
    </div>
    <h4>Recent Donations</h4>
    <ul id="donation-history"></ul>

    <div id="donation-status-section" class="hidden">
      <h3>Expenses/Transactions (Admin)</h3>
      <ul id="admin-transaction-history"></ul>
    </div>
  </section>

  <!-- Gallery -->
  <section id="gallery-tab" class="content-tab hidden">
    <h2>Gallery</h2>
    <h3>Current Year</h3>
    <div id="current-year-gallery"></div>
    <h3>Previous Years</h3>
    <div id="previous-years-gallery"></div>
    <h3>Rituals</h3>
    <div id="rituals-gallery"></div>

    <!-- Image Modal -->
    <div id="image-modal">
      <span class="close">&times;</span>
      <img id="modal-image" alt="Gallery Image" />
      <p id="modal-caption"></p>
    </div>
  </section>

  <!-- Admin -->
  <section id="admin-tab" class="content-tab hidden">
    <div id="login-section">
      <h3>Admin Login</h3>
      <input type="text" id="username" placeholder="Username" />
      <input type="password" id="password" placeholder="Password" />
      <button id="login-btn" type="button">Login</button>
      <div id="login-error" style="color: red;" class="hidden">Incorrect username or password</div>
    </div>

    <div id="admin-controls" class="hidden">
      <button id="logout-btn" type="button">Logout</button>

      <h3>Edit Pooja Schedule</h3>
      <textarea id="admin-pooja-textarea" rows="6"></textarea>
      <button id="admin-pooja-save-btn" type="button">Save</button>

      <h3>Add Donation Entry</h3>
      <input type="text" id="admin-donation-desc" placeholder="Description/Donor Name" />
      <input type="number" id="admin-donation-amount" placeholder="Amount (INR)" />
      <button id="admin-donation-add-btn" type="button">Add Donation</button>

      <h3>Add Expense Entry</h3>
      <input type="text" id="admin-expense-desc" placeholder="Expense Description" />
      <input type="number" id="admin-expense-amount" placeholder="Amount (INR)" />
      <button id="admin-expense-add-btn" type="button">Add Expense</button>

      <h3>Upload Gallery Image</h3>
      <form id="upload-image-form">
        <input type="file" id="image-upload" accept="image/*" />
        <input type="text" id="image-description" placeholder="Image Description" />
        <select id="image-category">
          <option value="current">Current Year</option>
          <option value="previous">Previous Years</option>
          <option value="rituals">Rituals</option>
        </select>
        <button type="submit">Upload Image</button>
      </form>
      <div id="upload-status"></div>

      <h3>Transaction History</h3>
      <ul id="admin-transaction-history"></ul>
    </div>
  </section>

  <button id="floating-donate-btn" title="Donate now" aria-label="Donate now">ðŸ’°</button>

  <script>
    // ======= CONFIGURATION (use your keys here) =======
    const firebaseConfig = {
      apiKey: "AIzaSyD8gX8-HleDASGiCW83-sMt7prRwbePto8",
      authDomain: "ganesh-donations.firebaseapp.com",
      databaseURL: "https://ganesh-donations-default-rtdb.firebaseio.com",
      projectId: "ganesh-donations",
      storageBucket: "ganesh-donations.firebasestorage.app",
      messagingSenderId: "685028500807",
      appId: "1:685028500807:web:7b8c4878edf8a1e57e5862",
      measurementId: "G-7DD2HWVG8C"
    };
    const CLOUDINARY_CLOUD_NAME = "db2s9ftfm";
    const CLOUDINARY_UNSIGNED_UPLOAD_PRESET = "pawan1516";
    // Instamojo backend API URL (change if hosted elsewhere)
    const INSTAMOJO_API_URL = 'http://localhost:5000/api/create-instamojo-payment';

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // --- Navigation Tabs ---
    const navLinks = document.querySelectorAll(".nav-link");
    const tabs = document.querySelectorAll(".content-tab");
    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        navLinks.forEach((l) => l.classList.remove("active-tab"));
        tabs.forEach((t) => t.classList.add("hidden"));
        link.classList.add("active-tab");
        document.getElementById(link.dataset.tab + "-tab").classList.remove("hidden");

        // Hide admin-only donation status if not admin
        if (link.dataset.tab === "donation" && !isAdmin) {
          document.getElementById("donation-status-section").classList.add("hidden");
        }
      });
    });
    window.onload = () => {
      navLinks[0].click();
    };

    // --- Countdown ---
    function updateCountdown() {
      const now = new Date();
      const festivalDate = new Date("Aug 27, 2025 00:00:00");
      const diff = festivalDate - now;
      if (diff <= 0) {
        ["days", "hours", "minutes", "seconds"].forEach((unit) => {
          document.getElementById("countdown-" + unit).textContent = "00";
        });
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      document.getElementById("countdown-days").textContent = days.toString().padStart(2, "0");
      document.getElementById("countdown-hours").textContent = hours.toString().padStart(2, "0");
      document.getElementById("countdown-minutes").textContent = minutes.toString().padStart(2, "0");
      document.getElementById("countdown-seconds").textContent = seconds.toString().padStart(2, "0");
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // --- Pooja Schedule ---
    const defaultSchedule = [
      "Morning Pooja: 8:00 AM - 9:00 AM",
      "Sankalpam: 9:00 AM - 9:30 AM",
      "Ashtavinayak Pooja: 9:30 AM - 11:30 AM",
      "Prasadam Distribution: 11:30 AM - 12:00 PM",
      "Evening Aarti: 6:30 PM - 7:00 PM",
    ];

    function renderPoojaList(list) {
      const listEl = document.getElementById("pooja-schedule-list");
      listEl.innerHTML = "";
      list.forEach((item) => {
        const li = document.createElement("li");
        li.className = "pooja-item";
        li.textContent = item;
        listEl.appendChild(li);
      });

      // Home tab preview
      const homeList = document.getElementById("home-pooja-list");
      homeList.innerHTML = "";
      list.forEach((item) => {
        const div = document.createElement("div");
        div.className = "flex items-start";
        div.innerHTML = `<span style="color:#d97706;margin-right:8px;">â€¢</span> ${item}`;
        homeList.appendChild(div);
      });
    }

    function loadPoojaSchedule() {
      db.collection("settings")
        .doc("pooja_schedule")
        .get()
        .then((doc) => {
          const list = doc.exists && Array.isArray(doc.data().list) ? doc.data().list : defaultSchedule;
          renderPoojaList(list);
        });
    }
    loadPoojaSchedule();

    // Pooja schedule edit (admin)
    const poojaEditBtn = document.getElementById("pooja-edit-btn");
    const poojaEditSection = document.getElementById("pooja-edit-section");
    const poojaScheduleTextarea = document.getElementById("pooja-schedule-textarea");
    const poojaSaveBtn = document.getElementById("pooja-save-btn");
    const poojaCancelBtn = document.getElementById("pooja-cancel-btn");

    poojaEditBtn.addEventListener("click", () => {
      poojaEditSection.classList.remove("hidden");
      db.collection("settings")
        .doc("pooja_schedule")
        .get()
        .then((doc) => {
          poojaScheduleTextarea.value = (doc.exists && Array.isArray(doc.data().list) ? doc.data().list : defaultSchedule).join(
            "\n"
          );
        });
    });

    poojaCancelBtn.addEventListener("click", () => poojaEditSection.classList.add("hidden"));

    poojaSaveBtn.addEventListener("click", () => {
      const newList = poojaScheduleTextarea.value.split("\n").map((l) => l.trim()).filter(Boolean);
      db.collection("settings").doc("pooja_schedule").set({ list: newList });
      renderPoojaList(newList);
      poojaEditSection.classList.add("hidden");
      alert("Pooja schedule saved.");
    });

    // --- Donation display & formatting ---
    function formatINR(n) {
      return "â‚¹" + Number(n).toLocaleString("en-IN", { maximumFractionDigits: 0 });
    }

    function loadDonationSummary() {
      db.collection("settings")
        .doc("total_donation")
        .onSnapshot((doc) => {
          const donation = doc.exists ? doc.data().amount : 0;
          document.getElementById("donation-total").textContent = formatINR(donation);

          db.collection("settings")
            .doc("total_spent")
            .onSnapshot((spentDoc) => {
              const spent = spentDoc.exists ? spentDoc.data().amount : 0;
              document.getElementById("expense-total").textContent = formatINR(spent);
              document.getElementById("net-balance").textContent = formatINR(donation - spent);
            });
        });

      db.collection("donations")
        .orderBy("timestamp", "desc")
        .limit(10)
        .onSnapshot((snapshot) => {
          const ul = document.getElementById("donation-history");
          ul.innerHTML = "";
          snapshot.docs.forEach((doc) => {
            const d = doc.data();
            const li = document.createElement("li");
            li.className = "flex justify-between items-center py-2";
            li.innerHTML = `
              <div>
                <span class="font-medium">${d.desc || "Anonymous"}</span>
                <br />
                <small>${d.timestamp && d.timestamp.toDate ? d.timestamp.toDate().toLocaleDateString("en-IN", { day: "numeric", month: "short" }) : ""}</small>
              </div>
              <strong style="color:#15803d;">${formatINR(d.amount)}</strong>
            `;
            ul.appendChild(li);
          });
        });
    }
    loadDonationSummary();

    // Instamojo payment integration: Replace Razorpay with backend call + redirect
    document.getElementById("donate-now-btn").onclick = async function () {
      const amt = document.getElementById("donate-amount").value;
      const buyer_name = document.getElementById("donate-name").value.trim();
      const email = document.getElementById("donate-email").value.trim();

      const statusEl = document.getElementById("instamojo-status");

      if (!amt || isNaN(amt) || amt <= 0 || !buyer_name || !email) {
        statusEl.textContent = "Please enter a valid amount, name, and email.";
        return;
      }

      statusEl.textContent = "Creating payment link...";

      try {
        const resp = await fetch(INSTAMOJO_API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            amount: amt,
            buyer_name,
            email,
            purpose: "Festival Donation",
            redirect_url: "https://your-redirect-url.com/payment-success"  // Replace with your URL
          }),
        });

        const data = await resp.json();
        if (data.payment_link) {
          // Redirect to Instamojo payment page
          window.location.href = data.payment_link;
        } else {
          statusEl.textContent = "Error: " + (data.error || "Could not create payment link.");
        }
      } catch (err) {
        statusEl.textContent = "Network or server error.";
        console.error(err);
      }
    };

    // Floating donate button switches to donate tab
    document.getElementById("floating-donate-btn").addEventListener("click", () => {
      navLinks[2].click();
    });

    // --- Admin UI and authentication ---
    let isAdmin = false;
    function toggleAdminUI() {
      // Show/hide admin only elements
      document.getElementById("donation-status-section").classList.toggle("hidden", !isAdmin);
      document.getElementById("pooja-edit-btn").classList.toggle("hidden", !isAdmin);
      if (isAdmin) {
        loadDonationSummary();
        db.collection("settings")
          .doc("pooja_schedule")
          .get()
          .then((doc) => {
            adminPoojaTextarea.value = (doc.exists && Array.isArray(doc.data().list) ? doc.data().list : defaultSchedule).join("\n");
          });
      }
    }

    // Admin authentication (very basic, replace with Firebase Auth in production)
    const ADMIN_USERNAME = "admin";
    const ADMIN_PASSWORD = "ganesha123";

    const loginSection = document.getElementById("login-section");
    const adminControls = document.getElementById("admin-controls");
    const loginError = document.getElementById("login-error");

    document.getElementById("login-btn").addEventListener("click", () => {
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
        isAdmin = true;
        loginError.classList.add("hidden");
        loginSection.classList.add("hidden");
        adminControls.classList.remove("hidden");
        toggleAdminUI();
        document.querySelector('[data-tab="admin"]').click();
      } else {
        loginError.classList.remove("hidden");
      }
    });

    document.getElementById("logout-btn").addEventListener("click", () => {
      isAdmin = false;
      loginSection.classList.remove("hidden");
      adminControls.classList.add("hidden");
      document.getElementById("pooja-edit-btn").classList.add("hidden");
      document.getElementById("username").value = "";
      document.getElementById("password").value = "";
    });

    // Admin - Image Upload
    const uploadForm = document.getElementById("upload-image-form");
    const uploadStatus = document.getElementById("upload-status");

    uploadForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      uploadStatus.textContent = "";

      const category = document.getElementById("image-category").value;
      const description = document.getElementById("image-description").value.trim() || "Ganesh Chaturthi Celebration";
      const fileInput = document.getElementById("image-upload");
      const file = fileInput.files[0];

      if (!file) {
        uploadStatus.textContent = "Please select an image file.";
        return;
      }
      if (file.size > 5 * 1024 * 1024) {
        uploadStatus.textContent = "Image size should be less than 5MB.";
        return;
      }

      uploadStatus.innerHTML = `<i class="fas fa-spinner fa-spin mr-1"></i> Uploading image...`;

      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", CLOUDINARY_UNSIGNED_UPLOAD_PRESET);

      try {
        const response = await fetch(`https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`, {
          method: "POST",
          body: formData,
        });

        const data = await response.json();
        if (!response.ok) throw new Error(data.error ? data.error.message : "Upload failed");

        await db.collection("gallery_images").add({
          url: data.secure_url,
          description,
          category,
          uploadedAt: firebase.firestore.FieldValue.serverTimestamp(),
        });

        uploadStatus.innerHTML = `<i class="fas fa-check-circle mr-1 text-green-600"></i> Image uploaded successfully!`;
        uploadForm.reset();
      } catch (error) {
        uploadStatus.innerHTML = `<i class="fas fa-times-circle mr-1 text-red-600"></i> Upload failed: ${error.message}`;
      }
    });

    // Admin: Edit Pooja Schedule
    const adminPoojaTextarea = document.getElementById("admin-pooja-textarea");
    const adminPoojaSaveBtn = document.getElementById("admin-pooja-save-btn");

    adminPoojaSaveBtn.addEventListener("click", () => {
      const newList = adminPoojaTextarea.value.split("\n").map((l) => l.trim()).filter(Boolean);
      db.collection("settings").doc("pooja_schedule").set({ list: newList });
      renderPoojaList(newList);
      alert("Pooja schedule updated successfully!");
    });

    // Admin: Add Donation Entry
    const adminDonationDesc = document.getElementById("admin-donation-desc");
    const adminDonationAmount = document.getElementById("admin-donation-amount");
    const adminDonationAddBtn = document.getElementById("admin-donation-add-btn");

    adminDonationAddBtn.addEventListener("click", () => {
      const desc = adminDonationDesc.value.trim();
      const amt = Number(adminDonationAmount.value);

      if (!desc || isNaN(amt) || amt <= 0) {
        return alert("Please fill all donation details with valid values.");
      }

      const batch = db.batch();

      const transactionRef = db.collection("transactions").doc();
      batch.set(transactionRef, {
        type: "donation",
        desc,
        amount: amt,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
      });

      const donationRef = db.collection("donations").doc();
      batch.set(donationRef, {
        desc,
        amount: amt,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
      });

      const totalRef = db.collection("settings").doc("total_donation");
      batch.set(
        totalRef,
        {
          amount: firebase.firestore.FieldValue.increment(amt),
        },
        { merge: true }
      );

      batch
        .commit()
        .then(() => {
          adminDonationDesc.value = "";
          adminDonationAmount.value = "";
          alert("Donation entry added successfully!");
        })
        .catch((error) => {
          alert("Error adding donation: " + error.message);
        });
    });

    // Admin: Add Expense Entry
    const adminExpenseDesc = document.getElementById("admin-expense-desc");
    const adminExpenseAmount = document.getElementById("admin-expense-amount");
    const adminExpenseAddBtn = document.getElementById("admin-expense-add-btn");

    adminExpenseAddBtn.addEventListener("click", () => {
      const desc = adminExpenseDesc.value.trim();
      const amt = Number(adminExpenseAmount.value);

      if (!desc || isNaN(amt) || amt <= 0) {
        return alert("Please fill all expense details with valid values.");
      }

      const batch = db.batch();

      const transactionRef = db.collection("transactions").doc();
      batch.set(transactionRef, {
        type: "expense",
        desc,
        amount: amt,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
      });

      const spentRef = db.collection("settings").doc("total_spent");
      batch.set(
        spentRef,
        {
          amount: firebase.firestore.FieldValue.increment(amt),
        },
        { merge: true }
      );

      batch
        .commit()
        .then(() => {
          adminExpenseDesc.value = "";
          adminExpenseAmount.value = "";
          alert("Expense entry added successfully!");
        })
        .catch((error) => {
          alert("Error adding expense: " + error.message);
        });
    });

    // --- Gallery display ---
    const currentYearGallery = document.getElementById("current-year-gallery");
    const previousYearsGallery = document.getElementById("previous-years-gallery");
    const ritualsGallery = document.getElementById("rituals-gallery");

    db.collection("gallery_images")
      .orderBy("uploadedAt", "desc")
      .onSnapshot((snapshot) => {
        currentYearGallery.innerHTML = "";
        previousYearsGallery.innerHTML = "";
        ritualsGallery.innerHTML = "";

        snapshot.docs.forEach((doc) => {
          const { url, description, category } = doc.data();
          const container = document.createElement("div");
          container.className = "gallery-img";
          container.innerHTML = `
            <img src="${url}" alt="${description}" />
            <div>${description || "Ganesh Chaturthi Celebration"}</div>
          `;
          container.onclick = () => openModal(url, description);

          if (category === "current") currentYearGallery.appendChild(container);
          else if (category === "previous") previousYearsGallery.appendChild(container);
          else if (category === "rituals") ritualsGallery.appendChild(container);
        });
      });

    // Modal functionality
    const modal = document.getElementById("image-modal");
    const modalImg = document.getElementById("modal-image");
    const modalCaption = document.getElementById("modal-caption");
    const closeBtn = modal.querySelector(".close");
    function openModal(src, alt) {
      modal.style.display = "flex";
      modalImg.src = src;
      modalCaption.textContent = alt || "Ganesh Chaturthi Celebration";
      document.body.style.overflow = "hidden";
    }
    closeBtn.onclick = () => {
      modal.style.display = "none";
      document.body.style.overflow = "auto";
    };
    window.onclick = (event) => {
      if (event.target === modal) {
        modal.style.display = "none";
        document.body.style.overflow = "auto";
      }
    };
  </script>
</body>
</html>

